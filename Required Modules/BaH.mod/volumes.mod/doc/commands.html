<html><head><title>Volumes reference</title>
<link rel=stylesheet Type=text/css href='../../../../doc/bmxstyle.css'>
</head><body>
<table width=100% cellspacing=0><tr align=center><td class=small>&nbsp;</td>
<td class=small width=1%><b>BaH.Volumes:</b></td>
<td class=small width=1%><a href=#consts class=small>Constants</a></td>
<td class=small width=1%><a href=#functions class=small>Functions</a></td>
<td class=small width=1%><a href=#types class=small>Types</a></td>
<td class=small width=1%><a href=#modinfo class=small>Modinfo</a></td>
<td class=small width=1%><a href='../../../../mod/bah.mod/volumes.mod/volumes.bmx' class=small>Source</a></td>
<td class=small>&nbsp;</td></tr></table>
<h1>Volumes</h1>
<img src="vol_logo.png" align="right" />
<p><b>Volumes</b> is a small cross-platform module which provides useful volume/device information support for BlitzMax.</p>
<p>The module is essentially split into two parts, that of volume information, and some functions which give user-specific directory paths.</p>
<h2>Volume Information</h2>
<p>Enables access to all volumes on the system, as well as drive-details such as free and total space for the volume.</p>
<p>To get a list of volumes on the current system, simply call <a href="#ListVolumes">ListVolumes</a> which returns
a list of <a href="#TVolume">TVolume</a> objects, from which you have access to the extra information.<br>
You can also retrieve size information directly using <a href="#GetVolumeSize">GetVolumeSize</a> and <a href="#GetVolumeFreeSpace">GetVolumeFreeSpace</a>.
</p>
<h2>User Directories</h2>
<p>Useful for the application developer is access to user-specific directories, like their home and document directories. 
The Volumes module provides access to four of these for all supported platforms: <a href="#GetUserAppDir">GetUserAppDir</a>, 
<a href="#GetUserDesktopDir">GetUserDesktopDir</a>, <a href="#GetUserDocumentsDir">GetUserDocumentsDir</a>, and <a href="#GetUserHomeDir">GetUserHomeDir</a>.</p>
<h2>Custom Directories</h2>
<p>
There are also more platform-specific directories available via the <a href="#GetCustomDir">GetCustomDir</a> method.
</p>
<p>
Generic paths include, DT_SHAREDUSERDATA, DT_USERPICTURES, DT_USERMUSIC and DT_USERMOVIES, which are standard values for all platforms.
</p>
<p>
On Windows, you can also use any of the CSIDL_xxxxxx identifiers to retrieve the specific path string.
</p>
<p>
On Mac, you can choose from a selection of "k" folder types, as well as an optional domain. The default domain is <a href="#kUserDomain">kUserDomain</a>. 
Others domains include <a href="#kSystemDomain">kSystemDomain</a>, <a href="#kLocalDomain">kLocalDomain</a> and <a href="#kNetworkDomain">kNetworkDomain</a>.
</p>
<h2><a name=consts></a>Constants Summary</h2><table class=doc width=100%><tr><td colspan=2>
<a href=#kLocalDomain>kLocalDomain</a>
, 
<a href=#kNetworkDomain>kNetworkDomain</a>
, 
<a href=#kSystemDomain>kSystemDomain</a>
, 
<a href=#kUserDomain>kUserDomain</a>
</td></tr>
</table>
<h2><a name=functions></a>Functions Summary</h2><table class=doc width=100%>
<tr><td class=docleft width=1%><a href=#GetCustomDir>GetCustomDir</a></td><td class=docright>
Returns the custom directory path.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetUserAppDir>GetUserAppDir</a></td><td class=docright>
Returns the user directory for application data.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetUserDesktopDir>GetUserDesktopDir</a></td><td class=docright>
Returns the user Desktop directory.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetUserDocumentsDir>GetUserDocumentsDir</a></td><td class=docright>
Returns the user Documents directory.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetUserHomeDir>GetUserHomeDir</a></td><td class=docright>
Returns the user home directory.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetVolumeFreeSpace>GetVolumeFreeSpace</a></td><td class=docright>
Returns the amount of free space (in bytes) on the given volume.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetVolumeInfo>GetVolumeInfo</a></td><td class=docright>
Populates and returns a <a href=#TVolume>TVolume</a> object.
</td></tr>
<tr><td class=docleft width=1%><a href=#GetVolumeSize>GetVolumeSize</a></td><td class=docright>
Returns the size (in bytes) of the given volume.
</td></tr>
<tr><td class=docleft width=1%><a href=#ListVolumes>ListVolumes</a></td><td class=docright>
Returns a list of volumes on the system.
</td></tr>
</table>
<h2><a name=types></a>Types Summary</h2><table class=doc width=100%>
<tr><td class=docleft width=1%><a href=#TVolume>TVolume</a></td><td class=docright>
A system Volume.
</td></tr>
</table>
<h2
 id=constsdet>Constants
</h2>
<table class=doc width=100% cellspacing=3 id=kLocalDomain>
<tr><td class=doctop colspan=2>Const kLocalDomain:Int</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>All users of a single machine have access to these resources.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=kNetworkDomain>
<tr><td class=doctop colspan=2>Const kNetworkDomain:Int</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>All users configured to use a common network server has access to these resources.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=kSystemDomain>
<tr><td class=doctop colspan=2>Const kSystemDomain:Int</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Read-only system hierarchy.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=kUserDomain>
<tr><td class=doctop colspan=2>Const kUserDomain:Int</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Resources that are private to the user.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Read/write.</td></tr>
</table>
<br>
<h2
 id=functionsdet>Functions
</h2>
<table class=doc width=100% cellspacing=3 id=GetCustomDir>
<tr><td class=doctop colspan=2>Function GetCustomDir:String(dirType:Int, flags:Int = 0)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns the custom directory path.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>The following table lists valid <b>dirType</b> -
<table align="center">
<tr><th>Platform</th><th>dirType</th><th>Description</th></tr>
<tr><td>Mac, Linux</td><td>DT_SHAREDUSERDATA</td><td>The Shared documents folder.</td></tr>
<tr><td>All</td><td>DT_USERPICTURES</td><td>The &quot;Pictures&quot; or &quot;My Pictures&quot; folder of the user.</td></tr>
<tr><td>All</td><td>DT_USERMUSIC</td><td>The &quot;Music&quot; or &quot;My Music&quot; folder of the user.</td></tr>
<tr><td>All</td><td>DT_USERMOVIES</td><td>The &quot;Movies&quot;, &quot;Videos&quot; or &quot;My Videos&quot; folder of the user.</td></tr>
<tr><td>Win32</td><td>CSIDL_xxxxxxxx</td><td>Any of the Windows-specific CSIDL identifiers that represent different folders on the system.</td></tr>
</table>
<p>Returns Null if <b>dirType</b> is not valid for the platform.</p></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GetUserAppDir>
<tr><td class=doctop colspan=2>Function GetUserAppDir:String()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns the user directory for application data.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>The table lists examples for the various platforms -
<table align="center">
<tr><th>Platform</th><th>Example</th><th>Equivalent</th></tr>
<tr><td>Linux</td><td>/home/username</td><td>~</td></tr>
<tr><td>Mac OS</td><td>/Users/username/Library/Application Support</td><td>~/Library/Application Support</td></tr>
<tr><td>Win32</td><td>C:\Documents and Settings\username\Application Data</td><td>&nbsp;</td></tr>
</table></td></tr>
<tr><td class=docleft width=1%><a href=GetUserAppDir.bmx class=small>Example</a></td><td class=docright><pre>SuperStrict

Framework BaH.Volumes
Import BRL.Standardio

Print GetUserAppDir()</pre></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GetUserDesktopDir>
<tr><td class=doctop colspan=2>Function GetUserDesktopDir:String()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns the user Desktop directory.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>The table lists examples for the various platforms -
<table align="center">
<tr><th>Platform</th><th>Example</th><th>Equivalent</th></tr>
<tr><td>Linux</td><td>/home/username/Desktop</td><td>~/Desktop</td></tr>
<tr><td>Mac OS</td><td>/Users/username/Desktop</td><td>~/Desktop</td></tr>
<tr><td>Win32</td><td>C:\Documents and Settings\username\Desktop</td><td>&nbsp;</td></tr>
</table></td></tr>
<tr><td class=docleft width=1%><a href=GetUserDesktopDir.bmx class=small>Example</a></td><td class=docright><pre>SuperStrict

Framework BaH.Volumes
Import BRL.Standardio

Print GetUserDesktopDir()</pre></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GetUserDocumentsDir>
<tr><td class=doctop colspan=2>Function GetUserDocumentsDir:String()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns the user Documents directory.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>The table lists examples for the various platforms -
<table align="center">
<tr><th>Platform</th><th>Example</th><th>Equivalent</th></tr>
<tr><td>Linux</td><td>/home/username/Documents</td><td>~/Documents</td></tr>
<tr><td>Mac OS</td><td>/Users/username/Documents</td><td>~/Documents</td></tr>
<tr><td>Win32</td><td>C:\Documents and Settings\username\My Documents</td><td>&nbsp;</td></tr>
</table></td></tr>
<tr><td class=docleft width=1%><a href=GetUserDocumentsDir.bmx class=small>Example</a></td><td class=docright><pre>SuperStrict

Framework BaH.Volumes
Import BRL.Standardio

Print GetUserDocumentsDir()</pre></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GetUserHomeDir>
<tr><td class=doctop colspan=2>Function GetUserHomeDir:String()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns the user home directory.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>The table lists examples for the various platforms -
<table align="center">
<tr><th>Platform</th><th>Example</th><th>Equivalent</th></tr>
<tr><td>Linux</td><td>/home/username</td><td>~</td></tr>
<tr><td>Mac OS</td><td>/Users/username</td><td>~</td></tr>
<tr><td>Win32</td><td>C:\Documents and Settings\username</td><td>&nbsp;</td></tr>
</table></td></tr>
<tr><td class=docleft width=1%><a href=GetUserHomeDir.bmx class=small>Example</a></td><td class=docright><pre>SuperStrict

Framework BaH.Volumes
Import BRL.Standardio

Print GetUserHomeDir()</pre></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GetVolumeFreeSpace>
<tr><td class=doctop colspan=2>Function GetVolumeFreeSpace:Long(vol:String)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns the amount of free space (in bytes) on the given volume.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Parameters:
<ul>
<li><b>vol</b> : the name of the volume</li>
</ul></td></tr>
<tr><td class=docleft width=1%><a href=GetVolumeFreeSpace.bmx class=small>Example</a></td><td class=docright><pre>SuperStrict

Framework bah.volumes
Import brl.standardio

Local vol:String

?win32
vol = "C:\"
?linux
vol = "/"
?macos
vol = "/"
?

Print "Freespace :"
Print vol + " = " + (GetVolumeFreeSpace(vol) / 1024) + " kb"</pre></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GetVolumeInfo>
<tr><td class=doctop colspan=2>Function GetVolumeInfo:TVolume(vol:String)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Populates and returns a <a href=#TVolume>TVolume</a> object.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Parameters:
<ul>
<li><b>vol</b> : the name of the volume</li>
</ul></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=GetVolumeSize>
<tr><td class=doctop colspan=2>Function GetVolumeSize:Long(vol:String)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns the size (in bytes) of the given volume.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Parameters:
<ul>
<li><b>vol</b> : the name of the volume</li>
</ul></td></tr>
<tr><td class=docleft width=1%><a href=GetVolumeSize.bmx class=small>Example</a></td><td class=docright><pre>SuperStrict

Framework bah.volumes
Import brl.standardio

Local vol:String

?win32
vol = "C:\"
?linux
vol = "/"
?macos
vol = "/"
?

Print "Total space :"
Print vol + " = " + (GetVolumeSize(vol) / 1024) + " kb"</pre></td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=ListVolumes>
<tr><td class=doctop colspan=2>Function ListVolumes:TList()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Returns a list of volumes on the system.</td></tr>
<tr><td class=docleft width=1%><a href=ListVolumes.bmx class=small>Example</a></td><td class=docright><pre>SuperStrict

Framework bah.volumes
Import brl.standardio

Local list:TList = ListVolumes()

If list Then
	Print "Volumes :"

	For Local v:TVolume = EachIn list
	
		'If v.available Then
			Print "~t" + v.volumeName + "  -  " + v.volumeDevice + " (" +  v.volumeType +  ") -  " + ((v.volumeFree / 1024) / 1024) + "mb"
		'End If
	
	Next
End If</pre></td></tr>
</table>
<br>
<h2
 id=typesdet>Types
</h2>
<table class=doc width=100% cellspacing=3 id=TVolume>
<tr><td class=doctop colspan=2>Type TVolume</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>A system Volume.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TVolume_fields></a>Fields Summary</th></tr><tr><td colspan=2>
<a href=#available>available</a>
, 
<a href=#volumeDevice>volumeDevice</a>
, 
<a href=#volumeFree>volumeFree</a>
, 
<a href=#volumeName>volumeName</a>
, 
<a href=#volumeSize>volumeSize</a>
, 
<a href=#volumeType>volumeType</a>
</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TVolume_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#Refresh>Refresh</a></td><td class=docright>
Refreshes size/free info for the volume.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=available>
<tr><td class=doctop colspan=2>Field available:Int</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>True if available, false if not.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=volumeDevice>
<tr><td class=doctop colspan=2>Field volumeDevice:String</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>The device name.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=volumeFree>
<tr><td class=doctop colspan=2>Field volumeFree:Long</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Cached free space (in bytes)</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>For the current free space, <a href=#Refresh>Refresh</a> first.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=volumeName>
<tr><td class=doctop colspan=2>Field volumeName:String</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>The volume name.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=volumeSize>
<tr><td class=doctop colspan=2>Field volumeSize:Long</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Cached volume size (in bytes)</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>For the current size, <a href=#Refresh>Refresh</a> first.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=volumeType>
<tr><td class=doctop colspan=2>Field volumeType:String</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>The system type.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=Refresh>
<tr><td class=doctop colspan=2>Method Refresh() Abstract</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Refreshes size/free info for the volume.</td></tr>
</table>
<br>
<h2 id=modinfo>Module Information</h2>
<table width=100%>
<tr><th width=1%>Version</th><td>1.07</td></tr>
<tr><th width=1%>License</th><td>MIT</td></tr>
<tr><th width=1%>Author</th><td>Bruce A Henderson</td></tr>
<tr><th width=1%>Copyright</th><td>(c) 2006-2011 Bruce A Henderson</td></tr>
<tr><th width=1%>History</th><td>1.07</td></tr>
<tr><th width=1%>History</th><td>Added support for all native CSIDL paths on Win32 using GetCustomDir.</td></tr>
<tr><th width=1%>History</th><td>Added support for 'k' paths on Mac using GetCustomDir.</td></tr>
<tr><th width=1%>History</th><td>Updated documentation.</td></tr>
<tr><th width=1%>History</th><td>1.06</td></tr>
<tr><th width=1%>History</th><td>Improved unicode support.</td></tr>
<tr><th width=1%>History</th><td>Added custom dir access for Pictures, Movies and Music.</td></tr>
<tr><th width=1%>History</th><td>Added Win32 volume search code. (Artemis)</td></tr>
<tr><th width=1%>History</th><td>Fixed Linux folder localisation (xdg-user-dirs).</td></tr>
<tr><th width=1%>History</th><td>1.05</td></tr>
<tr><th width=1%>History</th><td>Added GetCustomDir function.</td></tr>
<tr><th width=1%>History</th><td>1.04</td></tr>
<tr><th width=1%>History</th><td>Updated Win32 to use SHGetFolderPathW instead of SHGetFolderPathA</td></tr>
<tr><th width=1%>History</th><td>1.03</td></tr>
<tr><th width=1%>History</th><td>Added new functions : GetUserHomeDir, GetUserDesktopDir, GetUserAppDir, GetUserDocumentsDir.</td></tr>
<tr><th width=1%>History</th><td>1.02</td></tr>
<tr><th width=1%>History</th><td>Added Mac support.</td></tr>
<tr><th width=1%>History</th><td>1.01</td></tr>
<tr><th width=1%>History</th><td>Fixed win32 type returning the wrong string.</td></tr>
<tr><th width=1%>History</th><td>1.00 Initial Release</td></tr>
</body></html>
